network {
    * ready -(@initWiFi)-> offline,
    offline (@blinker200) [
        loop -(@networkCheck, smartconfig.loop)-,
        online --> online,
        _ --,
    ],
    online (@blinker500) [
        loop -(@networkCheck)-,
        offline --> offline,
        online -(mqtt.loop)-,
        _ --,
    ],
}

smartconfig {
    * ready --> idle,
    idle [
        smartconfig --> smartconfig,
        _ --,
    ],
    smartconfig (@blinker200, @beginSmartconfig, @setMaybeNeedBind) [
        loop -(@smartconfigDone)-,
        done -(@soundAlarm)-> idle,
        timeout -(@soundError)-> idle,
        _ --,
    ] (@blinker1000)
}
