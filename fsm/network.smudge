network {
    * ready -(@initWiFi)-> offline,
    offline (@blinker500) [
        loop -(@networkCheck, smartconfig.loop)-,
        online --> online,
        _ --,
    ],
    online (@blinker1000) [
        loop -(@networkCheck)-,
        offline --> offline,
        online -(mqtt.loop)-,
        _ --,
    ],
}

smartconfig {
    * ready --> idle,
    idle [
        smartconfig --> smartconfig,
        _ --,
    ],
    smartconfig (@blinker200, @beginSmartconfig, @setMaybeNeedBind) [
        loop -(@smartconfigDone)-,
        done -(sound.alarm)-> idle,
        timeout -(sound.error)-> idle,
        _ --,
    ] (@blinker1000)
}
